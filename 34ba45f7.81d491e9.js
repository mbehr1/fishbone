(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{95:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return h})),a.d(t,"metadata",(function(){return j})),a.d(t,"toc",(function(){return O})),a.d(t,"default",(function(){return g}));var n=a(3),s=a(7),i=a(0),r=a.n(i),c=a(104),l=a(108),o=function(e){var t=e.lightImageSrc,a=e.darkImageSrc,n=Object(l.a)().isDarkTheme;return r.a.createElement("img",{src:n?a:t})},b=a(105);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function m(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return d(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(a=e[Symbol.iterator]()).next.bind(a)}var p=function(e){if(!e||0===e.length)return"";var t="",a=null==e?void 0:e.indexOf("?");if(a>0){t+=e.slice(0,a+1)+"\n";for(var n,s=0,i=m(e.slice(a+1).split("&"));!(n=i()).done;){var r=n.value,c=r.indexOf("="),l=r.slice(0,c),o=decodeURIComponent(r.slice(c+1));s&&(t+=" &\n"),s++;try{t+=l+"="+JSON.stringify(JSON.parse(o)," ",2)+"\n"}catch(b){o.includes("{")||o.includes("[")||o.includes('"')?t+="<cannot parse: '"+l+"="+o+"' as JSON>":t+=l+"="+o}}}else t=e;return t};function u(){var e=Object(i.useState)("/get/docs/0/filters?query=%5B%5D"),t=e[0],a=e[1],n=Object(i.useState)(p("")),s=n[0],c=n[1],l=Object(i.useState)(""),o=l[0],b=l[1];return Object(i.useEffect)((function(){var e=p(t);e!==s&&c(e)}),[t]),Object(i.useEffect)((function(){try{var e=function(e){var t="",a=null==e?void 0:e.indexOf("?");if(a>0){t+=e.slice(0,a+1);for(var n,s=0,i=m(e.slice(a+1).split("&\n"));!(n=i()).done;){var r=n.value,c=(r=r.replace(/^\s+|\s+$/g,"")).indexOf("=");if(s&&(t+="&"),s++,c>=0){var l=r.slice(0,c),o=r.slice(c+1);try{t+=l+"="+encodeURIComponent(JSON.stringify(JSON.parse(o)))}catch(b){o.includes("{")||o.includes("[")||o.includes('"')?t+="&<cannot parse: '"+l+"="+o+"' as JSON>":t+=l+"="+o}}else t+=""+r}}else t=e;return t}(s);e!==o&&b(e)}catch(t){}}),[s]),r.a.createElement("form",null,r.a.createElement("label",null,"DLT-Logs rest query (URI encoded):",r.a.createElement("br",null),r.a.createElement("textarea",{cols:80,rows:20,value:t,placeholder:"enter your dlt-logs rest query expression here",type:"text",name:"payloadRegex",onChange:function(e){return a(e.target.value)}})),r.a.createElement("div",null),r.a.createElement("label",null,"DLT-Logs rest query (URI decoded, after & as command sep. a new line has to follow):",r.a.createElement("br",null),r.a.createElement("textarea",{cols:80,rows:30,type:"text",value:s,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null),r.a.createElement("label",null,"DLT-Logs rest query (URI re-encoded):",t!==o?" modified!":"",r.a.createElement("br",null),r.a.createElement("textarea",{readOnly:!0,cols:80,rows:20,type:"text",value:o})))}var h={id:"badges",title:"Badges",sidebar_label:"Badges"},j={unversionedId:"badges",id:"badges",isDocsHomePage:!1,title:"Badges",description:"Overview",source:"@site/docs/badges.md",slug:"/badges",permalink:"/fishbone/docs/badges",editUrl:"https://github.com/mbehr1/fishbone/edit/master/docs/fishbone/docs/badges.md",version:"current",sidebar_label:"Badges",sidebar:"fishboneSideBar",previous:{title:"Interactive diagrams",permalink:"/fishbone/docs/interactive"},next:{title:"Nested fishbone charts",permalink:"/fishbone/docs/nestedFishbones"}},O=[{value:"Overview",id:"overview",children:[]},{value:"Badges using DLT-Logs extensions",id:"badges-using-dlt-logs-extensions",children:[{value:"Data returned from a DLT-Logs rest query:",id:"data-returned-from-a-dlt-logs-rest-query",children:[]},{value:"Maximum number of DLT query messages returned: maxNrMsgs",id:"maximum-number-of-dlt-query-messages-returned-maxnrmsgs",children:[]},{value:"Adding lifecycle info to the DLT query results: addLifecycles",id:"adding-lifecycle-info-to-the-dlt-query-results-addlifecycles",children:[]},{value:"Json path details",id:"json-path-details",children:[]},{value:"Javascript function details",id:"javascript-function-details",children:[]},{value:"Javascript function examples",id:"javascript-function-examples",children:[]},{value:"URI-De-/Encoder",id:"uri-de-encoder",children:[]}]},{value:"Badges using https rest-queries",id:"badges-using-https-rest-queries",children:[]}],f={toc:O};function g(e){var t=e.components,a=Object(s.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},f,a,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"overview"},"Overview"),Object(c.b)("p",null,"Badges are little indicators (similar like number of messages on mobile phone icons) providing a quick way to show data and capture your attention."),Object(c.b)(o,{lightImageSrc:Object(b.a)("/img/badge1_light.png"),darkImageSrc:Object(b.a)("/img/badge1_dark.png"),mdxType:"ImageSwitcher"}),Object(c.b)("p",null,"Example picture with root cause 1 with upper badge and root cause 2 with both upper and lower badge."),Object(c.b)("p",null,"Each root-cause supports two badges:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"upper left badge. Shown in red color."),Object(c.b)("li",{parentName:"ul"},"lower left badge, shown in secondary color.")),Object(c.b)("p",null,"Badges receive their info from currently two sources:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"DLT-Logs extension"),Object(c.b)("li",{parentName:"ul"},"https rest-queries.")),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"The badges are only shown if the checkbox is unchecked."))),Object(c.b)("h2",{id:"badges-using-dlt-logs-extensions"},"Badges using DLT-Logs extensions"),Object(c.b)("p",null,"With DLT-Logs extension the following use-cases are supported:"),Object(c.b)("p",null,"Show information in any of the badges: "),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"based on number of messages matching a set of DLT-filters on the currently opened DLT-file"),Object(c.b)("li",{parentName:"ul"},"based on message attributes usually from the first message filtered"),Object(c.b)("li",{parentName:"ul"},"based on applying a user-defined Javascript on the messages returned from a query of a set of DLT-filters.")),Object(c.b)("p",null,"To use a badge perform the following steps:"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},Object(c.b)("strong",{parentName:"p"},"edit")," a root-cause (press the small pen icon on a root cause in the fishbone)")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"press the ",Object(c.b)("strong",{parentName:"p"},"edit upper left badge")," or *lower right badge** button")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"select the ",Object(c.b)("strong",{parentName:"p"},"extension dlt-logs rest query")," button")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"press the ",Object(c.b)("strong",{parentName:"p"},"OPEN DLT FILTER ASSISTANT...")," button")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"select the filters you want to use on the right hand side ",Object(c.b)("strong",{parentName:"p"},"All available filters:"),"."),Object(c.b)("div",Object(n.a)({parentName:"li"},{className:"admonition admonition-note alert alert--secondary"}),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"If the list is empty you do need to open a DLT log file and configure your filters there first.")))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"press the ",Object(c.b)("inlineCode",{parentName:"p"},"<"),"button to move those filters to the ",Object(c.b)("strong",{parentName:"p"},"Selected filters:")," list.")),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"press ",Object(c.b)("strong",{parentName:"p"},"SAVE CHANGES"))),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},'specify the "jsonPath" expression to extract results. For the "number of messages" use-case the jsonPath expression is already prefilled. See (todo) for details.')),Object(c.b)("li",{parentName:"ol"},Object(c.b)("p",{parentName:"li"},"select whether you want to use "),Object(c.b)("ul",{parentName:"li"},Object(c.b)("li",{parentName:"ul"},"number of array elements or"),Object(c.b)("li",{parentName:"ul"},"data from first element or "),Object(c.b)("li",{parentName:"ul"},"a javascript function")),Object(c.b)("p",{parentName:"li"},"to get the data out of the returned DLT-filter results."))),Object(c.b)("div",{className:"admonition admonition-info alert alert--info"},Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"The upper badge is configured to not show if the returned value is the number 0 and is limited to 999. The lower badge will show the 0 and is limited to 99.\nIf you want to show it anyhow or show higher numbers see ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#javascript-function-examples"}),"examples")," on how to convert to the string '0'."))),Object(c.b)("h3",{id:"data-returned-from-a-dlt-logs-rest-query"},"Data returned from a DLT-Logs rest query:"),Object(c.b)("p",null,"The returned data from a rest query is in general a JSON object. "),Object(c.b)("p",null,"For a query with DLT-filters it's typically in the form of an object with a key ",Object(c.b)("inlineCode",{parentName:"p"},"data")," that is an array of messages like:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsonc",metastring:"{2,5,6,11,17,18,23}","{2,5,6,11,17,18,23}":!0}),'{\n  "data": [\n    {\n        "id": 10,\n        "type": "msg",\n        "attributes": {\n            "timeStamp": 18283269,\n            "ecu": "ECU1",\n            "apid": "SYS",\n            "ctid": "CTI1",\n            "payloadString": "Example SYS CTI1 message payload...",\n            "lifecycle": 1585216860833.6\n        }\n    },\n    {\n        "id": 68,\n        "type": "msg",\n        "attributes": {\n            "timeStamp": 18304306,\n            "ecu": "ECU1",\n            "apid": "SYS",\n            "ctid": "CTI1",\n            "payloadString": "Another example SYS CTI1 message payload...",\n            "lifecycle": 1585216860833.6\n        },\n    }\n    // more msgs to follow\n    ]\n}\n')),Object(c.b)("h3",{id:"maximum-number-of-dlt-query-messages-returned-maxnrmsgs"},"Maximum number of DLT query messages returned: maxNrMsgs"),Object(c.b)("p",null,"By default a DLT-logs query returns a maximum of 1000 messages. In general this should be sufficient for the intended use-cases by using filters restricting the results. If you have use-cases where this is not sufficient you can increase the limit or even disable the limit by adding the ",Object(c.b)("inlineCode",{parentName:"p"},"maxNrMsgs"),"attribute to any filter of the query. E.g."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsonc",metastring:"{4}","{4}":!0}),'/get/docs/0/filters?\nquery=[\n  {\n    "maxNrMsgs": 0, // 0 = unlimited, 1000 default\n    "type": 0,\n    "payload": "foo.*",\n    "ctid": "FOOD"\n  }\n]\n')),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"If multiple filters specify ",Object(c.b)("inlineCode",{parentName:"p"},"maxNrMsgs")," the maximum value is used (0 counted as highest number)."))),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"Please consider that this might impact heavily the processing time to calculate/update all badges. So please use sparingly where needed only."))),Object(c.b)("h3",{id:"adding-lifecycle-info-to-the-dlt-query-results-addlifecycles"},"Adding lifecycle info to the DLT query results: addLifecycles"),Object(c.b)("p",null,"By default a DLT-logs query returns an array of DLT logs as shown in ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#data-returned-from-a-dlt-logs-rest-query"}),"Data returned"),". Each log info contains a ",Object(c.b)("inlineCode",{parentName:"p"},"lifecycle")," identifier as well that helps e.g. doing calculations like avg/min/max,... per lifecycle."),Object(c.b)("p",null,'To support more complex use-cases e.g. to calculate the time distance from a certain message towards the end of the lifecycle "occurred xx sec before end of LC" you can request the lifecycle details as well.\nTo do so simply add ',Object(c.b)("inlineCode",{parentName:"p"},"addLifecycles")," to any filter of your query. E.g."),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsonc",metastring:"{4}","{4}":!0}),'/get/docs/0/filters?\nquery=[\n  {\n    "addLifecycles": true, // defaults to false\n    "type": 0,\n    "payload": "foo.*",\n    "ctid": "FOOD"\n  }\n]\n')),Object(c.b)("p",null,"The example data returned will then consist of both type ",Object(c.b)("inlineCode",{parentName:"p"},"lifecycles")," and type ",Object(c.b)("inlineCode",{parentName:"p"},"msg")," objects:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-jsonc",metastring:"{3,17,35}","{3,17,35}":!0}),'  "data": [\n    {\n      "type": "lifecycles",\n      "id": 1585240865939.6,\n      "attributes": {\n        "index": 1,\n        "id": 1585240865939.6,\n        "ecu": "ECU1",\n        "label": "3/26/2020, 5:41:05 PM-5:42:57 PM #10277",\n        "startTimeUtc": "Thu, 26 Mar 2020 16:41:05 GMT",\n        "endTimeUtc": "Thu, 26 Mar 2020 16:42:57 GMT",\n        "sws": [], // list of sw versions detected\n        "msgs": 10277 // nr of messages in this lifecycle (unfiltered)\n      }\n    },\n    {\n      "type": "lifecycles",\n      "id": 1585240984260.5,\n      "attributes": {\n        "index": 2,\n        "id": 1585240984260.5,\n        "ecu": "ECU1",\n        "label": "3/26/2020, 5:43:04 PM-5:46:25 PM #41519",\n        "startTimeUtc": "Thu, 26 Mar 2020 16:43:04 GMT",\n        "endTimeUtc": "Thu, 26 Mar 2020 16:46:25 GMT",\n        "sws": [\n          "ECU1 21w..." // sw version received.\n        ],\n        "msgs": 41519 // nr of messages in this lifecycles (unfiltered)\n      }\n    },\n    // ... more lifecycle infos\n    {\n      "id": 10485,\n      "type": "msg",\n      "attributes": {\n        "timeStamp": 63279, // relative timestamp in 0.1ms granularity to the lifecycle startTimeUtc. You can use Date(lifecycle.startTimeUtc).valueOf()+msg.timeStamp/10 to calculate the abs starttime in ms from UTC.\n        "ecu": "ECU1",\n        "apid": "DEAD",\n        "ctid": "FOOD",\n        "payloadString": "foo happened",\n        "lifecycle": 1585240984260.5 // this can be used as an identifier/lookup to the returned lifecycles.id\n      }\n    },\n    // ... more messages fitting to the filters.\n  ]\n')),Object(c.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"The lifecycle infos are always the first objects in the results list and you can rely on the lifecycles being sorted by ecus first (if multiple ecus are present in the logs) then by time."))),Object(c.b)("h3",{id:"json-path-details"},"Json path details"),Object(c.b)("p",null,"As a first step of processing the returned object can be processed with a ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://goessner.net/articles/JsonPath/index.html"}),"json path")," pre-processor."),Object(c.b)("p",null,"E.g. to get the ",Object(c.b)("inlineCode",{parentName:"p"},"data")," array elements simply use:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),"$.data[*]\n")),Object(c.b)("p",null,"or if you're only interested in the attributes:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),"$.data[*].attributes\n")),Object(c.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"warning")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"Dont use this with the ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#adding-lifecycle-info-to-the-dlt-query-results-addlifecycles"}),"addLifecycles")," feature. You'll loose the type info!"))),Object(c.b)("p",null,"or for the ",Object(c.b)("inlineCode",{parentName:"p"},"payloadString"),":"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),"$.data[*].attributes.payloadString\n")),Object(c.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(c.b)("h5",{parentName:"div"},Object(c.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(c.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(c.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(c.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(c.b)("p",{parentName:"div"},"If you're not used to json path expressions there is a online evaluator available here ",Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"https://jsonpath.com"}),"jsonpath"),"."))),Object(c.b)("h3",{id:"javascript-function-details"},"Javascript function details"),Object(c.b)("p",null,"If the the number of messages or the first element from the json path expression is not sufficient e.g. for use-cases like:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"calculate an average/min/max value"),Object(c.b)("li",{parentName:"ul"},"calculate the distinct set of values e.g. different SW versions"),Object(c.b)("li",{parentName:"ul"},"extract/shorten the result"),Object(c.b)("li",{parentName:"ul"},"find lifecycles where messages matching exactly one of multiple filters"),Object(c.b)("li",{parentName:"ul"},"...")),Object(c.b)("p",null,"a user-provided javascript function body can be entered."),Object(c.b)("p",null,"The function prototype is in the form of:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),"function (result: object|any[] ):string|number|object {\n    <body text>\n}\n")),Object(c.b)("p",null,"It's actually created, called and evalued internally with:"),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"    const fn = new Function(\"result\", '<entered body text>');\n    const fnRes = fn(result); // call the function\n    switch (typeof fnRes) { // which type was returned:\n        case 'string': answer.convResult = fnRes; break;\n        case 'number': answer.convResult = fnRes; break;\n        case 'object': answer.convResult = JSON.stringify(fnRes); break;\n    ...\n")),Object(c.b)("p",null,"The result from the rest query or if provided from the json path processor is passed to the javascript function as ",Object(c.b)("inlineCode",{parentName:"p"},"result")," parameter."),Object(c.b)("h3",{id:"javascript-function-examples"},"Javascript function examples"),Object(c.b)("p",null,"See here a few examples:"),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},"provide from the first 3 results the substring from index 10 to 15 separated by ',':")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"   return result.slice(0,3).map(r=>r.slice(10,15)).join(',');\n")),Object(c.b)("ol",{start:2},Object(c.b)("li",{parentName:"ol"},"show 0 for number of message, i.e. convert to string as result:")),Object(c.b)("pre",null,Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-javascript"}),"    return result.length.toString();\n")),Object(c.b)("p",null,"todo ... add more examples."),Object(c.b)("h3",{id:"uri-de-encoder"},"URI-De-/Encoder"),Object(c.b)("p",null,'As the communication from fishbone extension to DLT-Logs extension is via a rest-api alike "restQuery" the query gets transmitted and stored in a URI encoded format.'),Object(c.b)("p",null,"To ease decoding and fast manual edits you can enter/modify the query below:"),Object(c.b)(u,{mdxType:"UriEnDecode"}),Object(c.b)("h2",{id:"badges-using-https-rest-queries"},"Badges using https rest-queries"))}g.isMDXComponent=!0}}]);